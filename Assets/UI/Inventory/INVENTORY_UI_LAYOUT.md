# Контракт раскладки: окно инвентаря и склада

Один источник правды для layout. Менять размеры/позиции только здесь (USS) и в этом документе.

**Аксиома:** экран фиксирован **480×270 px** (ширина × высота). Все размеры и позиции — только в **px**, без `%`. Адаптивность не требуется.

### Расчёт по пикселям (ширина экрана 480)

**Соло (только инвентарь):**
- Контент: сетка инвентаря 240px, экипировка 150px; по ширине ContentRow = 240px.
- Отступы: 8px слева + 8px справа = 16px (padding окна из C#).
- **Ширина окна = 240 + 16 = 256px.** Раньше было 240px (50% экрана) — не хватало места под отступы.

**Дуо (склад + инвентарь):**
- Окно на всю ширину **480px** (left: 0, right: 0) — без полосы пустоты слева.
- Padding 8+8 → 464px; margin-right 8px → **456px** на (склад + зазор + инвентарь).
- Инвентарь 240px, зазор 6px. **Склад = 456 − 6 − 240 = 210px**.
- Итого: склад 210px + зазор 6px + контент 240px = 456px.

**Правила построения UI** (подробнее в `Assets/Editor/UI/UI_REFACTOR_ANALYSIS.md`): единый фон панелей; зазор 4–6 px между соседними панелями; отступы от краёв экрана/окна (контент не «прилипает» к краю). Нарушать только с разрешения.

## Иерархия (UXML)

```
InventoryScreenRoot   ← rootVisualElement UIDocument (inventory-screen-root)
└── WindowRoot        ← окно инвентаря/склада (window-container). В обоих режимах right: 0 (прижато к правому краю).
    └── MainRow       ← горизонтальный ряд (margin 4px)
        ├── StashPanel   ← склад (скрыт по умолчанию, класс visible = показать)
        └── ContentRow   ← экипировка + рюкзак
```

- **InventoryScreenRoot**: в USS задано `width: 480px; height: 270px` (фиксированный экран в px).
- **WindowRoot**: переключается классом `stash-open`. Без класса = режим «только инвентарь», с классом = «склад + инвентарь».

## Режимы (всё в USS, только px)

| Режим | Класс на WindowRoot | Ожидаемое поведение |
|-------|---------------------|----------------------|
| Только инвентарь (I) | нет stash-open | Окно `right: 0`, `width: 256px` (240 контент + 8+8 отступы). Padding 8px из C#. |
| Инвентарь + склад (B) | stash-open | Окно `left: 0`, `width: 480px`, `padding: 8px` (без полосы слева). StashPanel **210px**, зазор 6px, ContentRow **240px**. |

## Где что менять

- **Размеры/позиции** — только в `InventoryStyles.uss`, в px. Соло: окно `width: 256px`. Комбо: окно `left: 0`, `width: 480px`, padding 8px. `.stash-panel` 210px, зазор 6px; `.main-row.stash-open .content-row` 240px. `.content-row`: `min-width: 0`, `overflow-x: auto`.
- **Переключение режима** — в C# только добавление/снятие классов (`stash-open`, `visible`). Не выставлять `style.left/right/width` в коде.
- **Структура** — UXML `InventoryLayout.uxml`. Имена элементов (WindowRoot, MainRow, StashPanel, ContentRow) используются в C# и WindowView; не переименовывать без правок кода.

## Если раскладка «поехала»

1. Проверить, что корень документа — InventoryScreenRoot и у него в USS задано `width: 480px; height: 270px`.
2. Проверить, что у WindowRoot при открытом складе есть класс `stash-open` (и у MainRow тоже).
3. Не дублировать позиционирование в C# — только классы.
4. Не использовать `%` в USS инвентаря/склада — только px.
